function highlighter(t,e){if($("html").hasClass("lt9"))return!0;hljs.highlightBlock(e);var n=t.html().replace(/^\n+|\n+$/g,"");if(t.hasClass("blank"))t.html(n);else{for(var i=n.split(/\n/).length,o='<table><td class="td-nb">',s=1;i+1>s;s++)o+='<span unselectable="on">'+s+"</span>\n";t.html(o+'</td><td class="td-code">'+n+"</td></tr></table>")}}function update_position(t){return $("html").hasClass("lt8")?!0:($(".div-affix").each(function(){var e=$(this),n=e.parent(),i=$(window).scrollTop(),o=e.parent().offset(),s="aligned-fixed aligned-bottom";e.height()+24>=$(window).height()?n.hasClass("aligned-fixed")&&(t?(n.removeClass(s).addClass("aligned-bottom"),$(window).scrollTop(e.offset().top)):n.removeClass(s)):o.top>=i+12?n.removeClass(s):i+12+e.height()>=$("body").height()?n.removeClass(s).addClass("aligned-bottom"):n.removeClass(s).addClass("aligned-fixed")}),void 0)}(function(t){t.fn.pie=function(){return this.each(function(){function e(t){var e=Math.floor(t.pageX-o.offset().left),n=Math.floor(t.pageY-o.offset().top),i=e-a/2,s=n-l/2,r=Math.sqrt(Math.pow(Math.abs(i),2)+Math.pow(Math.abs(s),2));if(d>=r&&r>=c-12){var u=Math.atan2(s,i);0>u&&(u=2*Math.PI+u);for(var p=0;f.length>p;p++)if(f[p].end>=u)return p}return!1}function n(t,e,n,i,o){s.fillStyle=n,s.beginPath(),s.moveTo(a/2,l/2),s.arc(a/2,l/2,i,t,e,!1),s.lineTo(a/2,l/2),s.fill(),o&&s.stroke()}function i(){s.clearRect(0,0,a,l),s.lineWidth=2,s.lineCap="round",s.strokeStyle=t("body").css("background-color");for(var e=0;f.length>e;e++){var i=f[e];n(i.start,i.end,i.color,d,!0)}n(0,2*Math.PI,t("body").css("background-color"),d-c,!1)}var o=t(this);if(!o.get(0).getContext)return!0;var s=o.get(0).getContext("2d"),a=parseInt(o.attr("width"),10),l=parseInt(o.attr("height"),10),d=l/2-12,c=d/2,r=!1,f=pies_data[o.data("data")];o.mousemove(function(u){var p=e(u);if(p!==r){if(r!==!1&&(i(),o.css("cursor","auto")),p!==!1){var h=f[p];s.globalCompositeOperation="destination-over",n(h.start,h.end,h.color,d+6,!0),s.globalCompositeOperation="source-over",o.css("cursor","pointer"),n(0,2*Math.PI,h.color,d-c-2,!1),s.font="900 32px "+t("body").css("font-family"),s.fillStyle="#fff",s.textAlign="center",s.textBaseline="middle",s.fillText(h.nb,a/2,l/2,50)}r=p}}),o.click(function(t){var n=e(t);n!==!1&&(window.location.href=f[n].url)}),i(),o.closest(".div-pie-statuses").show()})}})(jQuery),$(document).ready(function(){$(".box-settings .top").click(function(){$(this).find("i").toggleClass("icon-chevron-down").toggleClass("icon-chevron-up").end().closest(".box-settings").find(".inner-form").slideToggle()}),$(".a-help-markdown").click(function(){$(this).closest(".box").find(".div-help-markdown").toggle()}),$(".alert").click(function(){$(this).slideUp()}),$(".main-right-open").click(function(){$(".main-right").toggleClass("open")}),$(".a-menu").click(function(){$(".main-right").toggleClass("open")}),$(".pie-statuses").pie(),$(document).on("click",".btn-preview",function(){var t=$(this),e=$(this).closest("form");return $.ajax({type:"POST",url:ajax,data:{action:"markdown",text:e.find("textarea").val()}}).done(function(n){n=jQuery.parseJSON(n),n.success?(e.find("textarea").hide().end().find(".preview").html(n.text).show().end().find("pre code").each(function(t,e){highlighter($(this),e)}),t.removeClass("btn-preview").addClass("btn-edit").text(verb_edit),update_position(!0)):alert(n.text)}),!1}),$(document).on("click",".btn-edit",function(){return $(this).removeClass("btn-edit").addClass("btn-preview").text(verb_preview).closest("form").find(".preview").hide().end().find("textarea").show(),update_position(!0),!1}),$("form").submit(function(){if($(this).find('input[name="issue_labels"]').length){var t="";$(this).find(".label.selected").each(function(){t+=$(this).data("id")+","}),$(this).find('input[name="issue_labels"]').val(t)}}),$(".box-sort-filter form").submit(function(){var t=$(this).find("select"),e="",n=[];e="id"==t.eq(0).val()?"id_":"mod_",e+="desc"==t.eq(1).val()?"desc":"asc",$(this).find('input[name="sort"]').val(e),$(this).find(".btn-status.selected").each(function(){n.push($(this).data("id"))}),$(this).find('input[name="statuses"]').val(n.join(",")),e="all";var i=$(this).find(".btn-open").hasClass("selected"),o=$(this).find(".btn-closed").hasClass("selected");i&&!o?e="open":o&&!i&&(e="closed"),$(this).find('input[name="open"]').val(e)}),$(".box-sort-filter .btn-open,		.box-sort-filter .btn-closed,		.box-sort-filter .btn-status").not(".disabled").click(function(){$(this).toggleClass("selected").toggleClass("unselected")}),$(".p-edit-labels .label").click(function(){$(this).toggleClass("selected").toggleClass("unselected")}),$(".select-status").change(function(){$(this).find("option:selected").data("match")?$(".select-users").show():$(".select-users").hide()}).change(),$(".btn-cancel").click(function(){$(this).closest(".box").find(".t-display").show().end().find(".i-display").hide()}),$(".a-edit-content").click(function(){$(this).closest(".box").find(".t-display.div-left").hide().end().find(".i-display.div-left").show()}),$(".a-edit-details").click(function(){$(this).closest(".box").find(".t-display.div-right").hide().end().find(".i-display.div-right").show(),$(".select-status").change()}),$(".a-remove-issue").click(function(){confirm(confirm_delete_issue)&&$(this).closest("form").find('input[name="action"]').attr("name","delete_issue").end().submit()}),$(".a-notifications").click(function(){$(this).closest("form").find('input[name="action"]').attr("name","notifications").end().submit()}),$(".btn-reopen").click(function(){$(this).closest("form").find('input[name="issue_open"]').val("open")}),$(".btn-close").click(function(){$(this).closest("form").find('input[name="issue_open"]').val("closed")}),$(".a-edit").click(function(){$(this).closest(".box, form").find(".t-display").toggle().end().find(".i-display").toggle()}),$(".a-remove-comment").click(function(){confirm(confirm_delete_comment)&&$(this).closest(".box").find("form").find('input[name="edit_comment"]').attr("name","delete_comment").end().submit()}),$(".form-upload").each(function(){function t(t){e.find(".btn-upload").toggleClass("disabled").find("span").toggle().end().find("i").toggle().end().end().find(".bar").css("width",0),t.success?e.find(".uploads").append(t.text):alert(t.text),e.find('input[name="token"]').val(t.token).end().find('input[name="upload"]').remove().end().find(".btn-upload").append('<input type="file" name="upload" />'),update_position(!0)}var e=$(this);e.on("change",'input[name="upload"]',function(){var n=$(this)[0].files;if(n!==void 0&&window.XMLHttpRequestUpload&&window.FormData){n=n[0],xhr=new XMLHttpRequest,xhr.upload.addEventListener("progress",function(t){t.lengthComputable&&e.find(".bar").css("width",100*(t.loaded/t.total)+"%")},!1),xhr.addEventListener("load",function(e){t(jQuery.parseJSON(e.target.responseText))},!1),xhr.open("post",ajax,!0);var i=new FormData;i.append("type","xhr"),i.append("token",e.find('input[name="token"]').val()),i.append("action","upload"),i.append("upload",n),xhr.send(i)}else e.submit();e.find(".btn-upload").toggleClass("disabled").find("span").toggle().end().find("i").toggle()}),e.on("click",".icon-trash",function(){var t=$(this).closest("div");$.ajax({type:"POST",url:ajax,data:{action:"upload_remove",token:token,name:t.data("name")}}).done(function(e){e=jQuery.parseJSON(e),e.success?t.remove():alert(e.text),token=e.token})}),$(e.data("link")).submit(function(){var t="";e.find(".uploads div").each(function(){t+=$(this).data("name")+","}),$(this).find('input[name="uploads"]').val(t)})}),$(".a-remove-upload").click(function(){if(!confirm(confirm_delete_upload))return!1;var t=$(this).closest("p"),e=$(this).closest(".div-list-uploads").find(".progress");$.ajax({type:"POST",url:ajax,data:{action:"upload_remove_linked",token:token,name:t.data("name"),user:t.data("user")}}).done(function(n){n=jQuery.parseJSON(n),n.success?(t.remove(),e.find("span").html(n.space),e.find(".bar").css("width",n.percent+"%")):alert(n.text),token=n.token})}),$("pre code").each(function(t,e){highlighter($(this),e)}),$(window).scroll(function(){update_position()}),$(window).resize(function(){update_position()}),update_position()});